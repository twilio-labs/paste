export const meta = {
  title: 'Checkbox - Components',
  package: '@twilio-paste/checkbox',
  description:
    'The Checkbox and Checkbox Group are used to enable binary choices. These can either be used for an individual choice or to form a collection of choices.',
  slug: '/components/checkbox/',
};

import {Checkbox, CheckboxGroup, CheckboxDisclaimer} from '@twilio-paste/checkbox';
import {Box} from '@twilio-paste/box';
import {Badge} from '@twilio-paste/badge';
import {Text} from '@twilio-paste/text';
import {Paragraph} from '@twilio-paste/paragraph';
import {Anchor} from '@twilio-paste/anchor';
import {UnorderedList, ListItem} from '@twilio-paste/list';
import {DoDont, Do, Dont} from '../../../components/DoDont';
import {SidebarCategoryRoutes} from '../../../constants';
import Changelog from '@twilio-paste/checkbox/CHANGELOG.md';
import {
  checkedCheckbox,
  indeterminateExample,
  uncontrolledCheckbox,
  controlledCheckbox,
} from '../../../component-examples/CheckboxExamples';
import packageJson from '@twilio-paste/checkbox/package.json';
import ComponentPageLayout from '../../../layouts/ComponentPageLayout';
import {getFeature, getNavigationData} from '../../../utils/api';

export default ComponentPageLayout;

export const getStaticProps = async () => {
  const navigationData = await getNavigationData();
  const feature = await getFeature('Checkbox');
  return {
    props: {
      data: {
        ...packageJson,
        ...feature,
      },
      navigationData,
      mdxHeadings,
      pageHeaderData: {
        categoryRoute: SidebarCategoryRoutes.COMPONENTS,
        githubUrl: 'https://github.com/twilio-labs/paste/tree/main/packages/paste-core/components/checkbox',
        storybookUrl: '/?path=/story/components-checkbox--default-checkbox',
      },
    },
  };
};

<LivePreview scope={{Checkbox}} noInline>
  {checkedCheckbox}
</LivePreview>

## Guidelines

### About Checkbox Group

Use Checkbox Groups when you have multiple binary choices to make but all choices belong to a single group or field. Example: Choosing capabilities when searching for a phone number to provision from Twilio. By placing them in a group, users should be able to clearly understand which options make up the collection and how those options are related to each other.

For guidance on using a Checkbox in a form, refer to our [Form pattern](/patterns/form) guidelines.

### About Checkbox

Use a checkbox to present a user with a binary (e.g. on/off) choice that is part of a form. A checkbox should not be used to apply a user's choice instantly. In that case, such as enabling a system feature, use the [Switch component](/components/switch).

#### Accessibility

- Checkbox Group must have a group legend that describes the collection. The label should be visible. However if the entire form is just a single checkbox group with no other form elements, it may be visually hidden or provided via `aria-label` on the group component. The grouping should be visually implicit, but a description still needs to be provided for assistive technology.
- Checkbox must have a visible label. 
- When displaying additional content based on checking a checkbox, be sure that the new content appears after the checkbox so that it is naturally discoverable by assistive technology users.

### Checkbox

Use a checkbox to present a user with a binary (e.g. on/off) choice that is part of a form. A checkbox should not be used to apply a user's choice instantly. In that case, such as enabling a system feature, you should consider using the [Switch component](/components/switch).

#### Accessibility

- A checkbox must have a visible label that is in close proximity to the control
- HTML checkboxes don't natively support the `required` attribute. In cases where a checkbox is required to be checked:
  - Display a required indicator
  - Ensure the label text includes wording that successfully describes the requirement to the user that they should check the box
- When in an error state, display an inline error message below the checkbox or checkbox group that clearly describes the error along with an icon that depicts the severity.
- When displaying additional content based on checking a checkbox, be sure that the new content appears after the checkbox so that it is naturally discoverable by assistive technology users.

## Controlled vs. uncontrolled checkboxes

Checkbox can either be controlled, meaning there is an external state that determines if the checkbox is checked or not, or uncontrolled, meaning the checkbox manages its own state.

To make an uncontrolled checkbox, do not pass the `checked` or `onChange` props. If you need the checkbox to be checked by default, use the `defaultChecked` prop.

<LivePreview scope={{Checkbox}} noInline>
  {uncontrolledCheckbox}
</LivePreview>

To make a controlled checkbox, pass the `checked` and `onChange` props. You cannot use the `defaultChecked` prop in a controlled checkbox.

<LivePreview scope={{Checkbox}} noInline>
  {controlledCheckbox}
</LivePreview>

## Checkbox examples

### Basic Checkbox with Label

A checkbox is always displayed next to a visible label.

<LivePreview scope={{Checkbox}} noInline>
  {checkedCheckbox}
</LivePreview>

### Checkbox with help text

Use Checkbox with Help Text in cases where the checkbox requires additional context. In order to maintain styling consistency, be sure to use the `helpText` prop here instead of using the Help Text component.
<LivePreview scope={{Checkbox}} language="jsx">
  {`<Checkbox id="enabled" value="enabled" name="enabled" helpText="Determines if certificate validation is performed on all Twilio originated requests">
  Enable SSL certificate validation
</Checkbox>`}
</LivePreview>

### Required checkbox

Use the `required` prop to show a required indicator alongside the label when a checkbox is required to be checked. Ensure the label text includes wording that successfully describes the requirement to the user that they should check the box.

<LivePreview scope={{Checkbox}} language="jsx">
  {`<Checkbox id="delete" value="delete" name="delete" required>
  Confirm this message should be deleted
</Checkbox>`}
</LivePreview>

### Checkbox with suffix

You can provide additional information about an individual item by adding a non-string element as a suffix. The suffix can be any non-string element that is not interactive.

<LivePreview scope={{Checkbox, Badge, Box}} language="jsx">
  {`<Checkbox id="busy" value="busy" name="busy">
  <Box display="flex" columnGap="space30">Busy <Badge variant="new" size="small">New</Badge></Box>
</Checkbox>`}
</LivePreview>

## Checkbox Group examples

### Basic checkbox group

Group related checkboxes using a common group component. The group legend should come first to clearly describe the set of options.

<LivePreview scope={{Checkbox, CheckboxGroup}} language="jsx">
  {`<CheckboxGroup
  name="desktop"
  legend="Select the clients you would like to test."
>
  <Checkbox id="apple_mail" value="apple_mail">
    Apple Mail
  </Checkbox>
  <Checkbox id="outlook" value="outlook">
    Outlook
  </Checkbox>
</CheckboxGroup>`}
</LivePreview>

### Checkbox group with help text

Use help text to give more context about a Checkbox group. In order to maintain styling consistency, be sure to use the helpText prop here instead of using the Help Text component. Individual checkboxes can also include their own help text if needed.

<LivePreview scope={{Checkbox, CheckboxGroup, Anchor, Text}} language="jsx">
  {`<CheckboxGroup
  name="ad_partners"
  legend="Which ad partnes would you like to advertise on?"
  helpText="Select at least 1 ad partner to create a campaign."
>
  <Checkbox
    id="facebook"
    value="facebook"
    helpText={
      <Text as="span" color="currentColor">
        Questions? <Anchor href="http://paste.twilio.com">Click here to learn more</Anchor>.
      </Text>
    }
  >
    Facebook
  </Checkbox>
  <Checkbox
    id="instagram"
    value="instagram"
    helpText={
      <Text as="span" color="currentColor">
        Questions? <Anchor href="http://paste.twilio.com">Click here to learn more</Anchor>.
      </Text>
    }
  >
    Outlook
  </Checkbox>
</CheckboxGroup>`}
</LivePreview>

### Required Checkbox Group

Use a required indicator alongside the label when at least one item from the Checkbox Group is required to be checked.

<LivePreview scope={{Checkbox, CheckboxGroup}} language="jsx">
  {`<CheckboxGroup
  name="desktop"
  legend="Select the clients you would like to test."
  required
>
  <Checkbox id="apple_mail" value="apple_mail">
    Apple Mail
  </Checkbox>
  <Checkbox id="outlook" value="outlook">
    Outlook
  </Checkbox>
</CheckboxGroup>`}
</LivePreview>

### Horizontal Checkbox Group

Use a horizontal layout for Checkbox Group when options can be placed next to each other in a logical order and the labels for each option are shorter than 3 words.

<LivePreview scope={{Checkbox, CheckboxGroup, Badge, Box}} language="jsx">
  {`<CheckboxGroup
  name="select number type"
  legend="Select number type"
  orientation="horizontal"
>
  <Checkbox id="local" value="local">
    <Box display="flex" columnGap="space30">Local</Box>
  </Checkbox>
  <Checkbox id="mobile" value="mobile">
    Mobile
  </Checkbox>
  <Checkbox id="toll-free" value="toll-free">
    Toll-free
  </Checkbox>
</CheckboxGroup>`}
</LivePreview>

### Checkbox Disclaimer

Use Checkbox Disclaimer if a user needs to agree to Terms of Service or something similar.

<LivePreview scope={{CheckboxDisclaimer, Text}} language="jsx">
  {`<CheckboxDisclaimer id="disclaimer" value="disclaimer" name="disclaimer">
  I declare the information provided above is accurate. I acknowledge that Twilio will process the information provided above for the purpose of identity verification, and will be sharing it with my local telecomm providers or authorities where required by local law. I understand that Twilio phone numbers may be taken out of service for inaccurate or false information.
</CheckboxDisclaimer>`}
</LivePreview>

### Internationalization

To internationalize a checkbox, pass different text to Checkbox and Checkbox Group. The only exception to this is the required dot in the legend of a required Checkbox Group. To change the required dot's text, use the `i18nRequiredLabel` prop.
<LivePreview scope={{Checkbox, CheckboxGroup}} language="jsx">
  {`<CheckboxGroup
  name="days"
  legend="Jours préférés"
  i18nRequiredLabel="(requis)"
  required
>
  <Checkbox id="monday" value="monday">
    lundi
  </Checkbox>
  <Checkbox id="tuesday" value="tuesday">
    mardi
  </Checkbox>
  <Checkbox id="wednesday" value="wednesday">
    mercredi
  </Checkbox>
  <Checkbox id="thursday" value="thursday">
    jeudi
  </Checkbox>
  <Checkbox id="friday" value="friday">
    vendredi
  </Checkbox>
</CheckboxGroup>`}
</LivePreview>

## States

### Unchecked, checked and indeterminate

By default, checkboxes are unchecked. Clicking or pressing the spacebar toggles the checked state on or off. You can set a checkbox to be pre-checked using the `checked` property.

Checkboxes also support an indeterminate state, used when the checkbox is neither fully checked nor unchecked—like in a “Select all” scenario where only some items are selected.

<LivePreview scope={{Checkbox, CheckboxGroup}} noInline>
  {indeterminateExample}
</LivePreview>

### Disabled Checkbox

Use a disabled Checkbox to indicate that a particular option cannot be interacted with or can be safely ignored.

<LivePreview scope={{Checkbox}} language="jsx">
  {`<Checkbox
  id="hammer"
  value="hammer"
  name="hammer"
  disabled
  checked
>
  Can't touch this
</Checkbox>`}
</LivePreview>

### Disabled Checkbox Group

Use a disabled checkbox group to indicate that all options cannot be interacted with, with each checkbox individually disabled.

<LivePreview scope={{Checkbox, CheckboxGroup}} language="jsx">
  {`<CheckboxGroup
  name="desktop"
  legend="Select the clients you would like to test."
  disabled
>
  <Checkbox id="apple_mail" value="apple_mail">
    Apple Mail
  </Checkbox>
  <Checkbox id="outlook" value="outlook">
    Outlook
  </Checkbox>
</CheckboxGroup>`}
</LivePreview>

### Checkbox group with an error

If the selected options don't pass the group validation requirements, use the `errorText` prop to show an error message.

Focus the error text on how users can fix the issue. For additional guidance on how to compose error messages, refer to the [Error state pattern](/patterns/error-state).

<LivePreview scope={{Checkbox, CheckboxGroup}} language="jsx">
  {`<CheckboxGroup
  name="api"
  legend="API Key Permissions"
  errorText="Select at least one option."
>
  <Checkbox id="full_access" value="full_access">
    Full access
  </Checkbox>
  <Checkbox id="restricted_access" value="restricted_access">
    Restricted access
  </Checkbox>
</CheckboxGroup>`}
</LivePreview>

## Composition notes

### Checkbox labels, legends, and help text

Checkboxes and Checkbox Groups must have a visible label.

- Aim for no more than 3 words.
- Structure each checkbox label similarly. For example, make each checkbox a noun.
- Avoid articles ("a", "the") and punctuation. For example, use "SIM registration code" rather than "The SIM registration code".

Checkbox labels should reflect what happens if the box is checked. Avoid situations where the user must check a box to negate something. For example, "Don't send messages."

Use the `helpText` prop to give additional context and provide enough information to avoid errors. Consider using help text to indicate to users that they can select multiple options. Limit help text to 1-2 sentences.

To support internationalization, avoid starting a sentence with the legend and using the field to finish it since sentence structures vary across languages. For example, use "Phone Number capabilities", not "Phone Number capabilities include:".

### Validation

Validate a checkbox or a checkbox group on form submission. Don't validate each item in a group, treat validation on the group as a whole. For additional guidance on how to validate form fields, refer to our [Form pattern validation](/patterns/form#validation) guidelines.

## Do and don't

<DoDont>
  <Do title="Do" body="Use checkboxes to enable multiple choice." />
  <Dont
    title="Don't"
    body="Don't use checkboxes when you need to restrict selection to a single option. Use a Radio Group or Select instead."
  />
</DoDont>

<DoDont>
  <Do title="Do" body="Save the choice the user made upon submission of the form." />
  <Dont title="Don't" body="Don't save or persist a user's choice upon checking a checkbox." />
</DoDont>

<DoDont>
  <Do title="Do" body="Write label text that clearly describes the value being requested." />
  <Dont title="Don't" body="Don't use the legend and label text in a way that is intended to be read as a sentence." />
</DoDont>

<DoDont>
  <Do title="Do" body="Write legend text to describe a group and their intended relationship together." />
  <Dont title="Don't" body="Don't use a legend as a heading or section title." />
</DoDont>

## Related Paste patterns and page templates

- [Error state](/patterns/error-state)
- [Form pattern](/patterns/form)
- [Form Layout component](/components/form-layout)
- [Radio Group](/components/radio-group)
