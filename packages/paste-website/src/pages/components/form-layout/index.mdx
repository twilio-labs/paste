export const meta = {
  title: 'Form Layout',
  package: '@twilio-paste/form',
  description: 'A Form Layout standardizes spacing among form elements.',
  slug: '/components/form-layout/',
};

import {ResponsiveImage} from '../../../components/ResponsiveImage';
import {Box} from '@twilio-paste/box';
import {Button} from '@twilio-paste/button';
import {Callout, CalloutHeading, CalloutText, CalloutList, CalloutListItem} from '@twilio-paste/callout';
import {Checkbox, CheckboxGroup} from '@twilio-paste/checkbox';
import {DatePicker} from '@twilio-paste/date-picker';
import {DetailText} from '@twilio-paste/detail-text';
import {
  Form,
  FormActions,
  FormControl,
  FormControlTwoColumn,
  FormSection,
  FormSectionDescription,
  FormSectionHeading,
} from '@twilio-paste/form';
import {Heading} from '@twilio-paste/heading';
import {HelpText} from '@twilio-paste/help-text';
import {InlineCode} from '@twilio-paste/inline-code';
import {Input} from '@twilio-paste/input';
import {Label} from '@twilio-paste/label';
import {Paragraph} from '@twilio-paste/paragraph';
import {RadioGroup, Radio} from '@twilio-paste/radio-group';
import {SearchIcon} from '@twilio-paste/icons/esm/SearchIcon';
import {Select, Option} from '@twilio-paste/select';
import {Separator} from '@twilio-paste/separator';
import {TimePicker} from '@twilio-paste/time-picker';
import {useUIDSeed} from '@twilio-paste/uid-library';

import {DoDont, Do, Dont} from '../../../components/DoDont';
import {SidebarCategoryRoutes} from '../../../constants';
import {
  singleColumnForm,
  twoColumnForm,
  horizontalForm,
  sectionsForm,
  formActionsExample,
  errorExample,
  maxWidthForm,
} from '../../../component-examples/FormExamples';
import packageJson from '@twilio-paste/form/package.json';
import ComponentPageLayout from '../../../layouts/ComponentPageLayout';
import {getFeature, getNavigationData} from '../../../utils/api';
import FormLayoutComponent from '../../../assets/images/patterns/form-layout-component.png';
import Spacing from '../../../assets/images/patterns/spacing.png';

export default ComponentPageLayout;

export const getStaticProps = async () => {
  const navigationData = await getNavigationData();
  const feature = await getFeature('Form Layout');
  return {
    props: {
      data: {
        ...packageJson,
        ...feature,
        nameOverride: 'Form Layout',
        descriptionOverride:
          'A Form Layout groups related form elements that allow users to input information or configure options.',
      },
      navigationData,
      mdxHeadings,
      pageHeaderData: {
        categoryRoute: SidebarCategoryRoutes.COMPONENTS,
        githubUrl: 'https://github.com/twilio-labs/paste/tree/main/packages/paste-core/components/form',
        storybookUrl: '/?path=/story/components-form--default',
      },
    },
  };
};

<LivePreview
  scope={{
    Form,
    FormActions,
    FormControl,
    Heading,
    Input,
    Label,
    Button,
    Select,
    Option,
    Radio,
    RadioGroup,
    useUIDSeed,
  }}
  language="jsx"
  noInline
>
  {singleColumnForm}
</LivePreview>

## Guidelines

### About Form Layout

Use the Form Layout component to arrange a layout of form elements with preset spacing. Refer to our [Form pattern](/patterns/form) for additional guidance on types of forms and common form fields.

The different parts of the Form Layout component are:
1. **Form:** renders an HTML form element and comes with default behavior from the browser ([learn more about HTML form elements](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form)).
2. **FormControl**: Contains form fields, which are the UI components where users enter information.
3. **FormControlTwoColumn**: A group of two FormControls arranged horizontally.
4. **FormSection**: A group of FormControls that renders an HTML fieldset.
5. **FormSectionHeading and FormSectionDescription**: Use FormSectionHeading and FormSectionDescription to render a HTML legend which clearly describes the FormSection.
6. **FormActions**: A group of buttons often with a primary Button ordered first, followed by a secondary Button.

<ResponsiveImage src={FormLayoutComponent} alt="" />

### Accessibility

- Connect each form field to its associated Label with the `htmlFor` prop on the label, and the `id` prop on the input. Those two need to match.
- If the form field has any associated Help Text, the field should also use the `aria-describedby` prop that equals the `id` of the help text. This ensures screen readers know the Help Text ties directly to the field.
- Only use a single `Form` per page unless absolutely necessary. If using multiple `Form`s on a single page, take extra caution to ensure each form field's attributes are unique."
- Don’t use CSS to control element order. Form Layout elements should be displayed in the same order in the HTML as they appear on screen, as screen readers announce form elements in the order they appear in the HTML. The order in which form elements are presented on a webpage should be logical and meaningful. Reference: [WCAG](https://www.w3.org/WAI/WCAG22/Understanding/meaningful-sequence.html)
- Don't ask for the same information twice in the same session. Reference: [WCAG](https://www.w3.org/WAI/WCAG22/Understanding/redundant-entry)
- Provide accessible error identification and messaging. Reference: [WCAG](https://www.w3.org/WAI/WCAG22/Understanding/error-identification)
- Group related fields using fieldsets and legends with `FormSection` and `FormSectionHeading`, which render an HTML fieldset and legend. Reference: [WebAIM](https://webaim.org/techniques/forms/controls) 
- Use a single column layout, as it can be more difficult for users with limited vision to scan from right to left if a multi-column layout is used.

<Callout variant="neutral">
  <CalloutText>
    Check accessibility for each form element component—for example, follow <Anchor href="https://paste.twilio.design/components/time-picker#accessibility">Time Picker accessibility guidelines</Anchor>. You can also refer to the <Anchor href="https://www.w3.org/WAI/tutorials/forms/">WCAG Forms Tutorial</Anchor> for more details.
  </CalloutText>
</Callout>
<br />

## Examples

### Single column

We recommend using single-column layouts for forms because they are easier to read. To learn more, check out this [research on form readability](https://baymard.com/blog/avoid-multi-column-forms).

<LivePreview
  scope={{
    Form,
    FormActions,
    FormControl,
    Heading,
    Input,
    Label,
    Button,
    Select,
    Option,
    Radio,
    RadioGroup,
    useUIDSeed,
  }}
  language="jsx"
  noInline
>
  {singleColumnForm}
</LivePreview>

### 2 column

Use more than 1 column only when it is clearer than a single column and prevents users from inputting incorrect information. Reserve 2-column layouts for when form fields are organized as a coherent entity, like date ranges; first and last name; ZIP, city, and state; or credit card details. 

<LivePreview
  scope={{
    Form,
    FormActions,
    FormControl,
    FormControlTwoColumn,
    Heading,
    Paragraph,
    Label,
    Button,
    DatePicker,
    TimePicker,
    useUIDSeed,
  }}
  language="jsx"
  noInline
>
  {twoColumnForm}
</LivePreview>

### Horizontal form field layout

Use a horizontal form field layout for Checkbox and Radio Groups when options can be placed next to each other in a logical order and the labels for each option are shorter than 3 words.

<LivePreview
  scope={{
    Form,
    FormActions,
    FormControl,
    Heading,
    Paragraph,
    Radio,
    RadioGroup,
    Checkbox,
    CheckboxGroup,
    Button,
    useUIDSeed,
  }}
  language="jsx"
  noInline
>
  {horizontalForm}
</LivePreview>

### Form Layouts with sections

Complex forms should be split into sections, using `FormSection` which renders an HTML fieldset. When using multiple `FormSection`s, place a [Separator](/components/separator) between them.

Optionally, each section can include a:
- [Heading](/components/heading), known as a legend
- [Paragraph](/components/paragraph) to explain the section.

<LivePreview
  scope={{
    Form,
    FormActions,
    FormControl,
    FormSection,
    FormSectionDescription,
    FormSectionHeading,
    Separator,
    SearchIcon,
    Heading,
    Input,
    Label,
    Button,
    Select,
    Option,
    useUIDSeed,
    HelpText,
    Paragraph,
  }}
  language="jsx"
  noInline
>
  {sectionsForm}
</LivePreview>

### Setting max width

Use the `maxWidth` prop and a [size token](/tokens/list#sizings) to set a max width on the form. When no max width is set, the form will be set to 100% of the parent container.

Ensure that field lengths provide both:
- Meaningful affordances that help people answer questions 
- Enough room for inputs across multiple languages.


<LivePreview
  scope={{
    Form,
    FormActions,
    FormControl,
    Heading,
    Input,
    Label,
    Button,
    Select,
    Option,
    Radio,
    RadioGroup,
    useUIDSeed,
  }}
  language="jsx"
  noInline
>
  {maxWidthForm}
</LivePreview>

## Composition notes

Designing a good form requires making decisions about composition, sequence, form elements, content, and feedback. Use the [Form pattern](/patterns/form) for further guidance on form order and organization.

### Alignment

Keep forms left-aligned to improve scannability and help users quickly understand the required information. This also makes it easier for keyboard users to tab through fields.

<ResponsiveImage src={Spacing} alt="" />

<DetailText marginTop="space0">Keep all form elements left-aligned. Avoid adding any left padding to the form fields or form actions.</DetailText>
<br/>

## Form Layout dos and don'ts


<DoDont>
  <Do title="Do" preview={false} body="Use single column layouts as much as possible." />
  <Dont
    title="Don't"
    preview={false}
    body="Avoid multi-column layouts unless form fields are organized as a coherent entity, like date ranges; first and last name; ZIP, city, and state; or credit card details"
  />
</DoDont>
<DoDont>
  <Do
    title="Do"
    preview={false}
    body="Group related form elements into sections."
  />
  <Dont title="Don't" preview={false} body="Don't present a form as one long, unorganized list of form fields." />
</DoDont>
<DoDont>
  <Do
    title="Do"
    preview={false}
    body="Implement the best field length needed for the customer."
  />
  <Dont
    title="Don't"
    preview={false}
    body="Don’t implement a full-width form for every page. At the same time, don’t implement short form fields based only on the expected input length for one language. Consider the responsive behavior of the page and all supported languages."
  />
</DoDont>


## Related Paste patterns and page templates

- [Confirmation](/patterns/confirmation)
- [Create](/patterns/create)
- [Error state](/patterns/error-state)
- [Form pattern](/patterns/form)
- [Notifications and Feedback](/patterns/notifications-and-feedback)
- [Privacy](/patterns/privacy)
- [Wizard](/page-templates/wizard)
