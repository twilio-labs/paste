export const meta = {
  title: 'Roadmap',
  description:
    "Here's a glimpse of what is coming up in future releases of Paste. Unless explicitly mentioned, all release candidates are tentative and subject to change.",
  slug: '/roadmap/',
};

import {Roadmap, RoadmapAside} from '../../components/Roadmap';
import DefaultLayout from '../../layouts/DefaultLayout';
import {getRoadmap, getAllPackages} from '../../utils/api';

export default DefaultLayout;

export const getStaticProps = async () => {
  const roadmap = await getRoadmap();
  const allPackages = await getAllPackages();
  return {
    props: {
      roadmap: roadmap,
      navigationQueryData: allPackages,
    },
  };
};

export const pageQuery = `
  {
    Roadmap: allAirtable(
      sort: {fields: [data___Release_, data___Status, data___Release_feature_name]}
      filter: {table: {eq: "Roadmap"}, isFuture: {eq: true}}
    ) {
      group(field: data___Release) {
        release: fieldValue
        edges {
          node {
            data {
              Release_feature_name
              Release
              Release_Description
              Public_Description__from_System_
              Status
            }
          }
        }
      }
    }
    BPM: allAirtable(sort: {fields: [data___Name]}, filter: {table: {eq: "BPM"}}) {
      edges {
        node {
          data {
            Name
            Full_name
            Status
            Status_description
          }
        }
      }
    }
  }
`;

<contentwrapper>

<RoadmapAside data={props.roadmap} />

<content>

<h1>{meta.title}</h1>

<p>{meta.description}</p>

<Roadmap data={props.roadmap} />

</content>

</contentwrapper>
