---
title: Modal Dialog - Primitives
description: An accessible modal dialog window
slug: /primitives/modal-dialog-primitive/
---

import {graphql} from 'gatsby';
import {ModalDialogPrimitiveContent, ModalDialogPrimitiveOverlay} from '@twilio-paste/modal-dialog-primitive';
import Changelog from '@twilio-paste/modal-dialog-primitive/CHANGELOG.md';
import {Anchor} from '@twilio-paste/anchor';
import {Box} from '@twilio-paste/box';
import {SidebarCategoryRoutes} from '../../../constants';
import {Callout, CalloutTitle, CalloutText} from '../../../components/callout';
import {DoDont, Do, Dont} from '../../../components/DoDont';
import {ModalDialogPrimitiveExample} from '../../../component-examples/ModalDialogPrimitiveExample.tsx';

export const pageQuery = graphql`
  {
    allPastePrimitive(filter: {name: {eq: "@twilio-paste/modal-dialog-primitive"}}) {
      edges {
        node {
          name
          description
          status
          version
        }
      }
    }
    mdx(fields: {slug: {eq: "/primitives/modal-dialog-primitive/"}}) {
      fileAbsolutePath
      frontmatter {
        slug
        title
      }
      headings {
        depth
        value
      }
    }
  }
`;

<ComponentHeader
  name="Modal Dialog Primitive"
  categoryRoute={SidebarCategoryRoutes.PRIMITIVES}
  githubUrl="https://github.com/twilio-labs/paste/tree/main/packages/paste-core/primitives/modal-dialog"
  storybookUrl="/?path=/story/primitives-modaldialog--custom-overlay-and-content"
  data={props.data.allPastePrimitive.edges}
/>

---

<contentwrapper>

<PageAside data={props.data.mdx} />

<content>

## Guidelines

### About the Modal Dialog Primitive

The modal dialog primitive is an unstyled and barebones version of a [Modal dialog](https://www.w3.org/TR/wai-aria-practices/#dialog_modal).
It handles the implementation details around accessibility and provides a robust API to
build upon. For example, our [Modal component](../components/modal) is built on top of this primitive.
If you find that our designed Modal component can’t work for your particular use case,
we suggest falling back to this component to roll your own solution. We encourage
using this code as a basis for all modal dialogs in order to avoid code fragmentation
and accessibility issues in our products.

<Callout>
  <CalloutTitle as="h4">Looking for Paste's styled Modal?</CalloutTitle>
  <CalloutText>
    Only use this primitive if you have a bespoke modal design. For most Twilio interfaces, we recommend using the{' '}
    <Anchor href="/components/modal">Paste Modal component</Anchor>.
  </CalloutText>
</Callout>

## Usage Guide

This package is a wrapper around [`Reakit Dialog`](https://reakit.io/docs/dialog/). If
you’re wondering why we wrapped that package into our own, we reasoned that it would be best
for our consumers’ developer experience. With reasons such as:

- We can control which APIs we expose and how to expose them. For example, in this package we rename
  and export only some of the source package's exports.
- If we want to migrate the underlying nuts and bolts in the future, Twilio products that
  depend on this primitive would need to replace all occurrences of `import … from ‘reakit’`
  to `import … from ‘@some-new/package’`. By wrapping it in `@twilio-paste/modal-dialog-primitive`,
  this refactor can be avoided. The only change would be a version bump in the package.json file.
- We can more strictly enforce semver and backwards compatibility than some of our dependencies.
- We can control when to provide an update and which versions we allow, to help reduce
  potential bugs our consumers may face.

#### Installation

This package is available individually or as part of `@twilio-paste/core`.

```
yarn add @twilio-paste/modal-dialog-primitive - or - yarn add @twilio-paste/core
```

#### Usage Example

<Box paddingBottom="space80">
  <ModalDialogPrimitiveExample />
</Box>

```
import * as React from 'react';
import {styled} from '@twilio-paste/styling-library';
import {Text} from '@twilio-paste/text';
import {Button} from '@twilio-paste/button';
import {useModalDialogPrimitiveState, ModalDialogPrimitive, ModalDialogBackdropPrimitive} from '@twilio-paste/modal-dialog-primitive';

const StyledModalDialogOverlay = styled(ModalDialogBackdropPrimitive)({
  position: 'fixed',
  top: 0,
  right: 0,
  bottom: 0,
  left: 0,
  display: 'flex',
  justifyContent: 'center',
  alignItems: 'center',
  background: 'rgba(0, 0, 0, 0.7)',
});

const StyledModalDialogContent = styled(ModalDialogPrimitive)({
  width: '100%',
  maxWidth: '560px',
  maxHeight: 'calc(100% - 60px)',
  background: '#f4f5f6',
  borderRadius: '5px',
  padding: '20px',
});

xport const ModalDialogPrimitiveExample: React.FC = () => {
  const dialog = useModalDialogPrimitiveState({baseId: 'modal-primitive-example'});
  const handleOpen = (): void => dialog.show();
  const initialFocusRef = React.useRef() as React.MutableRefObject<HTMLInputElement>;

  React.useEffect(() => {
    if (dialog.visible) {
      initialFocusRef.current.focus();
    }
  }, [dialog.visible]);

  return (
    <>
      <Button
        variant="primary"
        onClick={handleOpen}
        aria-controls={dialog.baseId}
        aria-expanded={!!dialog.visible}
        aria-haspopup="dialog"
      >
        Open Modal
      </Button>
      <StyledModalDialogOverlay {...dialog}>
        <StyledModalDialogContent {...dialog} aria-label="Welcome">
          <input type="text" defaultValue="first" />
          <br />
          <input ref={initialFocusRef} type="text" defaultValue="second (initial focused)" />
          <Text as="p" color="colorText">
            Roll your own dialog!
          </Text>
        </StyledModalDialogContent>
      </StyledModalDialogOverlay>
    </>
  );
};
```

### API

#### Installation

```bash
yarn add @twilio-paste/modal-dialog-primitive - or - yarn add @twilio-paste/core
```

<Callout>
  <CalloutText>
    Much of the following is copied directly from <Anchor href="https://reakit.io/docs/dialog/">Reakit's docs</Anchor>.
    Because we may update at a different cadence, we're duplicating the docs here to prevent inconsistent behaviors.
  </CalloutText>
</Callout>

#### Props

This props list is a scoped version of the properties available from the [Reakit Dialog](https://reakit.io/docs/dialog/) package.

##### useModalDialogPrimitiveState

##### `baseId?: string`

Sets the ID that will serve as a base for all the items IDs.

##### `visible?: boolean`

Whether the modal dialog is visible or not.

##### `animated?: number | boolean`

If true, animating will be set to true when visible is updated. It'll wait for stopAnimation to be called or a CSS transition ends. If animated is set to a number, stopAnimation will be called only after the same number of milliseconds have passed.

##### `modal?: boolean`

Sets the modal state.

- Non-modal: preventBodyScroll doesn't work and focus is free.
- Modal: preventBodyScroll is automatically enabled, focus is trapped within the modal dialog and the modal dialog is rendered within a Portal.

##### ModalDialogPrimitive

##### `hideOnEsc?: boolean | undefined`

If enabled, the user can hide the modal dialog by pressing Escape.

##### `hideOnClickOutside?: boolean | undefined`

If enabled, the user can hide the modal dialog by clicking outside it.

##### `preventBodyaScroll?: boolean | undefined`

If enabled, the user can't scroll on body when the modal dialog is visible. This option doesn't work if the dialog isn't a modal.

<ChangelogRevealer>
  <Changelog />
</ChangelogRevealer>

</content>

</contentwrapper>
