export const meta = {
  title: 'User Dialog',
  package: '@twilio-paste/user-dialog',
  description: 'User dialog is an expandable menu that contains profile related actions.',
  slug: '/components/user-dialog/',
};

import Changelog from '@twilio-paste/topbar/CHANGELOG.md';
import {SidebarCategoryRoutes} from '../../../constants';
import {Topbar} from '@twilio-paste/topbar';
import {Menu, MenuItem, useMenuState, MenuBadge} from '@twilio-paste/menu';
import {Badge} from '@twilio-paste/badge';
import {Box} from '@twilio-paste/box';
import {Input} from '@twilio-paste/input';
import {SearchIcon} from '@twilio-paste/icons/esm/SearchIcon';
import {
  ProductSwitcher,
  ProductSwitcherButton,
  ProductSwitcherItem,
  useProductSwitcherState,
} from '@twilio-paste/product-switcher';
import {LogoTwilioIcon} from '@twilio-paste/icons/esm/LogoTwilioIcon';
import {ProductSegmentIcon} from '@twilio-paste/icons/esm/ProductSegmentIcon';
import {ProductFlexIcon} from '@twilio-paste/icons/esm/ProductFlexIcon';
import {ProductEmailAPIIcon} from '@twilio-paste/icons/esm/ProductEmailAPIIcon';
import packageJson from '@twilio-paste/topbar/package.json';
import DefaultLayout from '../../../layouts/DefaultLayout';
import {getFeature, getNavigationData} from '../../../utils/api';
import {defaultTopbarExample, emptyTopbarExample} from '../../../component-examples/TopbarExamples.ts';

export default DefaultLayout;

export const getStaticProps = async () => {
  const navigationData = await getNavigationData();
  const feature = await getFeature('User Dialog');
  return {
    props: {
      data: {
        ...packageJson,
        ...feature,
      },
      navigationData,
    },
  };
};

<NormalizedComponentHeader
  categoryRoute={SidebarCategoryRoutes.COMPONENTS}
  githubUrl="https://github.com/twilio-labs/paste/tree/main/packages/paste-core/components/user-dialog"
  storybookUrl="/?path=/story/components-user-dialog--"
  data={props.data}
/>

---

<contentwrapper>

<PageAside data={mdxHeadings} />

<content>

<LivePreview
  scope={{
    Topbar,
    Box,
    Input,
    Menu,
    MenuItem,
    useMenuState,
    MenuBadge,
    Badge,
    ProductSwitcher,
    ProductSwitcherButton,
    ProductSwitcherItem,
    useProductSwitcherState,
    LogoTwilioIcon,
    ProductSegmentIcon,
    ProductFlexIcon,
    ProductEmailAPIIcon,
    SearchIcon,
  }}
  noInline
>
  {defaultTopbarExample}
</LivePreview>

## Guidelines

### About User Dialog

A User Dialog is a composition of [Avatar](/components/avatar) and [Button](/components/button) that opens a dialog of items that trigger profile-related actions.

A User Dialog item can be used to perform a single action, such as a page navigation or opening a modal. A profile-related action could be visiting a user settings page, switching the language of a product, or logging out.

### Accessibility

When the user is focused on the User Dialog Button, enter and space open the menu.

When the user is focused on a list item, the following keyboard interactions apply:

- Enter and space select the current menu item
- Up and down arrows move the user between the menu items
- Disabled menu items and separators are never focused

## Default User Dialog

Account-specific controls are aligned to the left, such as:

Use a User Dialog to display actions that a user can trigger related to their profile. Add separators to group menu items.

<LivePreview scope={{Topbar}} noInline>
  {emptyTopbarExample}
</LivePreview>

## Usage guide

### Figma

The User Dialog component is available in the Paste Components library as a [Navigation component](https://www.figma.com/file/l2qtpQVMmXzQPVB3rEAA8i/%5BNEW%5D-Paste-Components?type=design&node-id=27837-187276&t=xcPacI1AN13MooNC-0).

### API

#### Installation

```bash
yarn add @twilio-paste/user-dialog - or - yarn add @twilio-paste/core
```

#### Usage

```jsx
import {UserDialog} from '@twilio-paste/core/user-dialog';

const Topbar = () => {
  return (
    <Topbar>
      {TODO:}
    </Topbar>
  );
};
```

#### Topbar props

| Prop      | Type              | Description                                                                               | Default  |
| --------- | ----------------- | ----------------------------------------------------------------------------------------- | -------- |
| children? | `React.ReactNode` | Recommended: Account Switcher, User Dialog, Product Switcher, Search Input, etc.          |          |
| element?  | `string`          | Overrides the default element name to apply unique styles with the Customization Provider | 'TOPBAR' |

<ChangelogRevealer>
  <Changelog />
</ChangelogRevealer>

</content>

</contentwrapper>
