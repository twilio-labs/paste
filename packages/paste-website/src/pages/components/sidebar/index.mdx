export const meta = {
  title: 'Sidebar',
  package: '@twilio-paste/sidebar',
  description: 'Sidebar encapsulates navigation elements offering traversal throughout web applications.',
  slug: '/components/sidebar/',
};

import {Box} from '@twilio-paste/box';
import {Anchor} from '@twilio-paste/anchor';
import {Button} from '@twilio-paste/button';
import {Stack} from '@twilio-paste/stack';
import {Callout, CalloutHeading, CalloutText} from '@twilio-paste/callout';
import {ProductFlexIcon} from '@twilio-paste/icons/esm/ProductFlexIcon';
import {
  Sidebar,
  SidebarHeader,
  SidebarCollapseButton,
  SidebarCollapseButtonWrapper,
  SidebarPushContentWrapper,
  SidebarOverlayContentWrapper,
} from '@twilio-paste/sidebar';
import Changelog from '@twilio-paste/sidebar/CHANGELOG.md';

import {SidebarCategoryRoutes} from '../../../constants';
import packageJson from '@twilio-paste/sidebar/package.json';
import DefaultLayout from '../../../layouts/DefaultLayout';
import {getFeature, getNavigationData} from '../../../utils/api';

export default DefaultLayout;

export const getStaticProps = async () => {
  const navigationData = await getNavigationData();
  const feature = await getFeature('Sidebar');
  return {
    props: {
      data: {
        ...packageJson,
        ...feature,
      },
      navigationData,
    },
  };
};

<NormalizedComponentHeader
  categoryRoute={SidebarCategoryRoutes.COMPONENTS}
  githubUrl="https://github.com/twilio-labs/paste/tree/main/packages/paste-core/components/sidebar"
  storybookUrl="/?path=/story/components-sidebar-push--"
  description={meta.description}
  data={props.data}
/>

---

<contentwrapper>

<PageAside data={mdxHeadings} />

<content>

<iframe
  src="https://codesandbox.io/embed/sidebar-push-variant-default-55wkwx?fontsize=14&hidenavigation=1&theme=dark&view=preview"
  style={{width: '100%', height: '500px', border: 0, borderRadius: '4px', overflow: 'hidden', marginBottom: '40px'}}
  title="Sidebar Push variant=default"
  allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
  sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

## Guidelines

### About Sidebar

The Sidebar component is a container that sits on the left side of the screen. It is meant to encapsulate app navigation.

<Callout variant="warning" marginY="space70">
  <CalloutHeading as="h4">Only use one Sidebar on a page</CalloutHeading>
  <CalloutText>
    We currenly only support having one Sidebar on a page. If you have questions, please post{' '}
    <Anchor href="https://github.com/twilio-labs/paste/discussions" showExternal>
      a GitHub Discussion
    </Anchor>
    .
  </CalloutText>
</Callout>

### Accessibility

Sidebar follows these accessibility guidelines:

- The `Sidebar` component is a `nav` element.
- The `Sidebar` component must be provided an `aria-label` prop for screenreaders software. `aria-label="Main"` is read as "Main Navigation", the word "navigation" being pulled from the `nav` element.
- The `SidebarCollapseButton` internally provides an `aria-controls` and `aria-expanded` HTML attribute that matches the `Sidebar` component.
- The `SidebarCollapseButton` must always be used in tandem with the `Sidebar` component, otherwise there is no accessible Sidebar trigger for screenreaders.

## Examples

### Push Sidebar (Default)

The "push" Sidebar moves the page content as it expands and collapses.
The `default` variant hides completely on collapse.

<iframe
  src="https://codesandbox.io/embed/sidebar-push-variant-default-55wkwx?fontsize=14&hidenavigation=1&theme=dark&view=preview"
  style={{width: '100%', height: '500px', border: 0, borderRadius: '4px', overflow: 'hidden', marginBottom: '40px'}}
  title="Sidebar Push variant=default"
  allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
  sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

### Push Sidebar (Compact)

The "push" Sidebar moves the page content as it expands and collapses.
The `compact` variant maintains a fixed visible width on collapse.

<iframe
  src="https://codesandbox.io/embed/sidebar-push-variant-compact-j7d2yr?fontsize=14&hidenavigation=1&theme=dark"
  style={{width: '100%', height: '500px', border: 0, borderRadius: '4px', overflow: 'hidden', marginBottom: '40px'}}
  title="Sidebar Push variant=compact"
  allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
  sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

### Overlay Sidebar (Default)

The "overlay" Sidebar sits on top of the page content as it expands and collapses.
The `default` variant hides completely on collapse.

<iframe
  src="https://codesandbox.io/embed/sidebar-overlay-variant-default-i4ktck?fontsize=14&hidenavigation=1&theme=dark"
  style={{width: '100%', height: '500px', border: 0, borderRadius: '4px', overflow: 'hidden', marginBottom: '40px'}}
  title="Sidebar Overlay variant=default"
  allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
  sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

### Overlay Sidebar (Compact)

The "overlay" Sidebar sits on top of the page content as it expands and collapses.
The `compact` variant maintains a fixed visible width on collapse.

<iframe
  src="https://codesandbox.io/embed/sidebar-overlay-variant-compact-i9gbf7?fontsize=14&hidenavigation=1&theme=dark"
  style={{width: '100%', height: '500px', border: 0, borderRadius: '4px', overflow: 'hidden', marginBottom: '40px'}}
  title="Sidebar Overlay variant=compact"
  allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
  sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

## Usage Guide

### API

#### Installation

```bash
yarn add @twilio-paste/sidebar - or - yarn add @twilio-paste/core
```

#### Usage

```jsx
import {
  Sidebar,
  SidebarHeader,
  SidebarHeaderLabel,
  SidebarHeaderIconButton,
  SidebarCollapseButton,
  SidebarCollapseButtonWrapper,
  SidebarPushContentWrapper,
  SidebarOverlayContentWrapper,
} from '@twilio-paste/core/sidebar';

const SideModalExample: React.FC = () => {
  const [pushSidebarCollapsed, setPushSidebarCollapsed] = React.useState(false);
  return (
    <Box>
      {/* Can be placed anywhere - position fixed */}
      <Sidebar aria-label="Main" collapsed={pushSidebarCollapsed} variant="default">
        <Stack orientation="vertical" spacing="space100">
          <SidebarHeader>
            <SidebarHeaderIconButton>
              <ProductFlexIcon size="sizeIcon20" decorative={false} title="Go to Flex product homepage" />
            </SidebarHeaderIconButton>
            <SidebarHeaderLabel>Twilio Flex</SidebarHeaderLabel>
          </SidebarHeader>
          <SidebarBetaBadge as="span">Beta</SidebarBetaBadge>
          <SidebarCollapseButtonWrapper>
            <SidebarCollapseButton
              onClick={() => setPushSidebarCollapsed(!pushSidebarCollapsed)}
              i18nCollapseLabel="Close sidebar"
              i18nExpandLabel="Open sidebar"
            />
          </SidebarCollapseButtonWrapper>
        </Stack>
      </Sidebar>

      {/* Must wrap content area */}
      <SidebarPushContentWrapper collapsed={pushSidebarCollapsed} variant="default">
        <Button variant="primary" onClick={() => setPushSidebarCollapsed(!pushSidebarCollapsed)}>
          Toggle Push Sidebar
        </Button>
      </SidebarPushContentWrapper>
    </Box>
  );
};
```

#### Props

##### Sidebar

| Prop         | Type                       | Description                                                                               | Default     |
| ------------ | -------------------------- | ----------------------------------------------------------------------------------------- | ----------- |
| `element?`   | `string`                   | Overrides the default element name to apply unique styles with the Customization Provider | `'SIDEBAR'` |
| `collapsed?` | `boolean`                  | Whether the sidebar is collapsed / closed.                                                | false       |
| `variant?`   | `'default'` \| `'compact'` | Whether the sidebar should hide completely or collapse into a fixed width bar.            |             |
| `children?`  | `React.ReactNode`          |                                                                                           |             |

##### SidebarHeader

| Prop        | Type              | Description                                                                               | Default            |
| ----------- | ----------------- | ----------------------------------------------------------------------------------------- | ------------------ |
| `element?`  | `string`          | Overrides the default element name to apply unique styles with the Customization Provider | `'SIDEBAR_HEADER'` |
| `children?` | `React.ReactNode` |                                                                                           |                    |

##### SidebarHeaderLabel

| Prop        | Type              | Description                                                                               | Default                  |
| ----------- | ----------------- | ----------------------------------------------------------------------------------------- | ------------------------ |
| `element?`  | `string`          | Overrides the default element name to apply unique styles with the Customization Provider | `'SIDEBAR_HEADER_LABEL'` |
| `children?` | `React.ReactNode` |                                                                                           |                          |

##### SidebarHeaderIconButton

| Prop        | Type              | Description                                                                               | Default                        |
| ----------- | ----------------- | ----------------------------------------------------------------------------------------- | ------------------------------ |
| `element?`  | `string`          | Overrides the default element name to apply unique styles with the Customization Provider | `'SIDEBAR_HEADER_ICON_BUTTON'` |
| `onClick?`  | `() => void`      |                                                                                           |                                |
| `children?` | `React.ReactNode` |                                                                                           |                                |

##### SidebarCollapseButtonWrapper

| Prop        | Type              | Description                                                                               | Default                             |
| ----------- | ----------------- | ----------------------------------------------------------------------------------------- | ----------------------------------- |
| `element?`  | `string`          | Overrides the default element name to apply unique styles with the Customization Provider | `'SIDEBAR_COLLAPSE_BUTTON_WRAPPER'` |
| `children?` | `React.ReactNode` |                                                                                           |                                     |

##### SidebarCollapseButton

| Prop                | Type              | Description                                                                               | Default                     |
| ------------------- | ----------------- | ----------------------------------------------------------------------------------------- | --------------------------- |
| `element?`          | `string`          | Overrides the default element name to apply unique styles with the Customization Provider | `'SIDEBAR_COLLAPSE_BUTTON'` |
| `i18nCollapseLabel` | `string`          | A label for the collapse trigger for screenreader software.                               |                             |
| `i18nExpandLabel`   | `string`          | A label for the expand trigger for screenreader software.                                 |                             |
| `onClick?`          | `() => void`      |                                                                                           |                             |
| `children?`         | `React.ReactNode` |                                                                                           |                             |

##### SidebarBetaBadge

| Prop        | Type                   | Description                                                                               | Default                |
| ----------- | ---------------------- | ----------------------------------------------------------------------------------------- | ---------------------- |
| `element?`  | `string`               | Overrides the default element name to apply unique styles with the Customization Provider | `'SIDEBAR_BETA_BADGE'` |
| `as`        | `'span'` \| `'button`' | If an `onClick` is provided, you must define this to `as="button"`.                       |                        |
| `onClick?`  | `() => void`           |                                                                                           |                        |
| `children?` | `React.ReactNode`      |                                                                                           |                        |

##### SidebarOverlayContentWrapper

| Prop         | Type                       | Description                                                                               | Default                             |
| ------------ | -------------------------- | ----------------------------------------------------------------------------------------- | ----------------------------------- |
| `element?`   | `string`                   | Overrides the default element name to apply unique styles with the Customization Provider | `'SIDEBAR_OVERLAY_CONTENT_WRAPPER'` |
| `collapsed?` | `boolean`                  | Whether the sidebar is collapsed / closed.                                                | false                               |
| `variant?`   | `'default'` \| `'compact'` | Whether the sidebar should hide completely or collapse into a fixed width bar.            |                                     |
| `children?`  | `React.ReactNode`          |                                                                                           |                                     |

##### SidebarPushContentWrapper

| Prop         | Type                       | Description                                                                               | Default                          |
| ------------ | -------------------------- | ----------------------------------------------------------------------------------------- | -------------------------------- |
| `element?`   | `string`                   | Overrides the default element name to apply unique styles with the Customization Provider | `'SIDEBAR_PUSH_CONTENT_WRAPPER'` |
| `collapsed?` | `boolean`                  | Whether the sidebar is collapsed / closed.                                                | false                            |
| `variant?`   | `'default'` \| `'compact'` | Whether the sidebar should hide completely or collapse into a fixed width bar.            |                                  |
| `children?`  | `React.ReactNode`          |                                                                                           |                                  |

<ChangelogRevealer>
  <Changelog />
</ChangelogRevealer>

</content>

</contentwrapper>
